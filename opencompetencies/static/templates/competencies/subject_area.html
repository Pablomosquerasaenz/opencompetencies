{% extends 'base.html' %}

{% block title_extension %} - {{ school }}{% endblock %}

{% block content %}

	 <h2><a href="/schools/{{ school.id }}">{{ school.name }}</a></h2>

	 <p>This page lists all of the subdiscipline areas for {{ subject_area }}.  The competency areas for the general subject, and for each subdiscipline area are shown as well.</p>
	 <p><a href='/edit_subject_area/{{ subject_area.id }}/'>Edit subdiscipline areas</a> | 
		 <a href='{% url 'competencies:edit_sa_competency_areas' subject_area.id %}'>Edit general {{ subject_area }} competency areas</a>
	    | <a href='{% url 'competencies:entire_system' school.id %}'>View entire system</a>
	 </p>

	 <h2>{{ subject_area }}</h2>

	 {% if sa_subdiscipline_areas %}
	     <ul>
			   {# Show general competencies not associated with any sda: #}
				<ul>
				{% for ca in sa_general_competency_areas %}
				    <li><h4><a href='/competency_areas/{{ ca.id }}/'>{{ ca }}</a></h4></li>
				{% endfor %}
			   </ul>
		  {% for sda, cas in sda_competency_areas.items %}
		      <li><h3><a href='/subdiscipline_areas/{{ sda.id }}/'>{{ sda }}</a></h3></li>
				<ul>
				{% for ca in cas %}
				    <li><h4><a href='/competency_areas/{{ ca.id }}/'>{{ ca }}</a><h4></li>
				{% endfor %}
				</ul>
		  {% endfor %}
		  </ul>
	 {% elif user.is_authenticated and school in user.profile.schools.all %}
		  <p>There are no subdiscipline areas defined for this subject area yet.</p>
    {% else %}
		  <p>There are no public subdiscipline areas defined for this subject area yet.</p>
	 {% endif %}

{% endblock %}
